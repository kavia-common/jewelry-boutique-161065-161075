{"is_source_file": true, "format": "TypeScript", "description": "This source file defines an authentication store for a front-end application using Pinia, managing user login, registration, token handling, and profile fetching.", "external_files": ["@/api/http", "@/api/types", "axios"], "external_methods": ["setAuthToken"], "published": ["useAuthStore"], "classes": [], "methods": [{"name": "function getErrorMessage(error: unknown, fallback: string): string { getErrorMessage", "description": "Extracts a user-friendly error message from an unknown error object, particularly handling Axios errors.", "scope": "", "scopeKind": ""}, {"name": "init", "description": "Initializes the store by restoring the auth token from localStorage and fetching the user's profile."}, {"name": "login", "description": "Performs user login with email and password, setting the auth token and fetching user profile."}, {"name": "register", "description": "Registers a new user and automatically logs in upon success."}, {"name": "fetchMe", "description": "Fetches the current user's profile information using the stored auth token."}, {"name": "logout", "description": "Clears the auth token and user profile data."}], "calls": ["http.post", "http.get", "setAuthToken", "localStorage.getItem"], "search-terms": ["auth store", "Pinia auth management", "auth token handling", "user profile fetch", "auth initialization"], "state": 2, "file_id": 21, "knowledge_revision": 52, "git_revision": "", "revision_history": [{"45": ""}, {"52": ""}], "ctags": [{"_type": "tag", "name": "ApiErrorPayload", "path": "/home/kavia/workspace/code-generation/jewelry-boutique-161065-161075/jewelry_shop_frontend/src/stores/auth.ts", "pattern": "/^type ApiErrorPayload = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "AuthState", "path": "/home/kavia/workspace/code-generation/jewelry-boutique-161065-161075/jewelry_shop_frontend/src/stores/auth.ts", "pattern": "/^interface AuthState {$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/jewelry-boutique-161065-161075/jewelry_shop_frontend/src/stores/auth.ts", "pattern": "/^        const { data } = await http.get<User>('\\/auth\\/me')$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/jewelry-boutique-161065-161075/jewelry_shop_frontend/src/stores/auth.ts", "pattern": "/^        const { data } = await http.post<AuthLoginResponse>('\\/auth\\/login', payload)$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/jewelry-boutique-161065-161075/jewelry_shop_frontend/src/stores/auth.ts", "pattern": "/^  error: string | null$/", "language": "TypeScript", "kind": "property", "scope": "AuthState", "scopeKind": "interface"}, {"_type": "tag", "name": "getErrorMessage", "path": "/home/kavia/workspace/code-generation/jewelry-boutique-161065-161075/jewelry_shop_frontend/src/stores/auth.ts", "pattern": "/^function getErrorMessage(error: unknown, fallback: string): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "loading", "path": "/home/kavia/workspace/code-generation/jewelry-boutique-161065-161075/jewelry_shop_frontend/src/stores/auth.ts", "pattern": "/^  loading: boolean$/", "language": "TypeScript", "kind": "property", "scope": "AuthState", "scopeKind": "interface"}, {"_type": "tag", "name": "payload", "path": "/home/kavia/workspace/code-generation/jewelry-boutique-161065-161075/jewelry_shop_frontend/src/stores/auth.ts", "pattern": "/^    const payload = error.response?.data as ApiErrorPayload | undefined$/", "language": "TypeScript", "kind": "constant", "scope": "getErrorMessage", "scopeKind": "function"}, {"_type": "tag", "name": "token", "path": "/home/kavia/workspace/code-generation/jewelry-boutique-161065-161075/jewelry_shop_frontend/src/stores/auth.ts", "pattern": "/^      const token = localStorage.getItem(AUTH_TOKEN_KEY)$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "token", "path": "/home/kavia/workspace/code-generation/jewelry-boutique-161065-161075/jewelry_shop_frontend/src/stores/auth.ts", "pattern": "/^  token: string | null$/", "language": "TypeScript", "kind": "property", "scope": "AuthState", "scopeKind": "interface"}, {"_type": "tag", "name": "useAuthStore", "path": "/home/kavia/workspace/code-generation/jewelry-boutique-161065-161075/jewelry_shop_frontend/src/stores/auth.ts", "pattern": "/^export const useAuthStore = defineStore('auth', {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "user", "path": "/home/kavia/workspace/code-generation/jewelry-boutique-161065-161075/jewelry_shop_frontend/src/stores/auth.ts", "pattern": "/^  user: User | null$/", "language": "TypeScript", "kind": "property", "scope": "AuthState", "scopeKind": "interface"}], "hash": "05c3dc33a7254c3af649b5690f757951", "format-version": 4, "code-base-name": "jewelry_shop_frontend", "filename": "jewelry_shop_frontend/src/stores/auth.ts", "fields": [{"name": "interface AuthState {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "error: string | null", "scope": "AuthState", "scopeKind": "interface", "description": "unavailable"}, {"name": "loading: boolean", "scope": "AuthState", "scopeKind": "interface", "description": "unavailable"}, {"name": "token: string | null", "scope": "AuthState", "scopeKind": "interface", "description": "unavailable"}, {"name": "user: User | null", "scope": "AuthState", "scopeKind": "interface", "description": "unavailable"}]}